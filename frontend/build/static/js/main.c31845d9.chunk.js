(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{40:function(e,t,n){e.exports=n(71)},70:function(e,t,n){},71:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(8),u=n.n(o),c=n(6),s=n(32),l=n(23),i=n(34),d=n.n(i),f=n(4),m=n(35),p=n(10),E=n(3),v=Object(c.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isAuthenticated:!1,authenticationFailed:!1,statusText:"Please log in"},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_SUCCESS":return{isAuthenticated:!0,authenticationFailed:!1,statusText:"You are logged in"};case"LOGIN_FAILURE":return{isAuthenticated:!1,authenticationFailed:!0,statusText:"Error logging in: ".concat(t.error)};case"LOGOUT":return{isAuthenticated:!1,authenticationFailed:!1,statusText:"Please log in"};default:return e}},rounds:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{roundsLoaded:!1,sortKey:"date",reverseSort:!0,selectedRoundIndex:null,data:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_ROUNDS":return Object(E.a)({},e,{roundsLoaded:!0,data:Object(E.a)({},t.data)});case"ADD_ROUND_DATA":return Object(E.a)({},e,{data:Object(E.a)({},e.data,Object(p.a)({},t.roundIndex,Object(E.a)({},e.data[t.roundIndex],{roundData:Object(E.a)({},t.roundData)})))});case"SELECT_ROUND":return t.data?Object(E.a)({},e,{selectedRoundIndex:t.roundIndex,data:Object(E.a)({},e.data,Object(p.a)({},t.roundIndex,Object(E.a)({},e.data[t.roundIndex],{roundData:Object(E.a)({},t.data)})))}):Object(E.a)({},e,{selectedRoundIndex:t.roundIndex});case"SET_SORT_KEY":return t.sortKey===e.sortKey?Object(E.a)({},e,{reverseSort:!e.reverseSort}):"date"===t.sortKey||"total_gir"===t.sortKey?Object(E.a)({},e,{reverseSort:!0,sortKey:t.sortKey}):Object(E.a)({},e,{reverseSort:!1,sortKey:t.sortKey});case"TOGGLE_SORT_ORDER":return Object(E.a)({},e,{reverseSort:!e.reverseSort});default:return e}},stats:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{statsLoaded:!1,selectedSeason:2046,data:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_STATS":return Object(E.a)({},e,{statsLoaded:!0,data:Object(E.a)({},t.data)});case"SELECT_SEASON":return Object(E.a)({},e,{selectedSeason:t.season});default:return e}},token:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TOKEN":return t.token;case"CLEAR_TOKEN":return null;default:return e}}}),h=Object(c.d)(Object(l.a)({key:"golf-stats",storage:d.a,whitelist:["token"]},v),Object(c.a)(s.a)),b=Object(l.b)(h),g=n(17),O=n.n(g),k=function(e,t){return O.a.get(e,function(e){return{headers:{Authorization:e}}}(t))},_=function(){return function(e,t){return(n=t().token,O.a.post("/api/is_token_valid",{token:n})).then(function(e){return e.data}).then(function(t){return t?e({type:"LOGIN_SUCCESS"}):(e({type:"CLEAR_TOKEN"}),e({type:"LOGIN_FAILURE",error:"Invalid token"}))}).catch(function(){return e({type:"LOGIN_FAILURE",error:"Invalid token"})});var n}},y=function(e,t){return function(n){return function(e,t){return O.a.post("/api/get_token",{username:e,password:t})}(e,t).then(function(e){return e.data}).then(function(e){return n({type:"SET_TOKEN",token:e.token}),n({type:"LOGIN_SUCCESS"})}).catch(function(){return n({type:"LOGIN_FAILURE",error:"Invalid username or password"})})}},x=n(12),j=n(15),S=n(13),N=n(16),w=n(1),C=n(2);function T(){var e=Object(w.a)(["\n  margin-left: 20px;\n  min-width: 80px;\n"]);return T=function(){return e},e}function D(){var e=Object(w.a)(["\n  min-width: 80px;\n"]);return D=function(){return e},e}function I(){var e=Object(w.a)(["\n  margin: 20px 0 20px 0;\n"]);return I=function(){return e},e}function L(){var e=Object(w.a)(["\n  font-size: 3em;\n"]);return L=function(){return e},e}function R(){var e=Object(w.a)(["\n  width: 180px;\n  margin: 20% 0 0 20%;\n"]);return R=function(){return e},e}var A=C.a.div(R()),K=C.a.div(L()),U=C.a.div(I()),F=C.a.input(D()),G=C.a.input(T()),Y=function(e){function t(){var e,n;Object(x.a)(this,t);for(var r=arguments.length,o=new Array(r),u=0;u<r;u++)o[u]=arguments[u];return(n=Object(j.a)(this,(e=Object(S.a)(t)).call.apply(e,[this].concat(o)))).state={username:"",password:""},n.handleKeyPress=function(e){13===e.keyCode&&n.login()},n.login=function(){n.props.login(n.state.username,n.state.password)},n.render=function(){return a.a.createElement(A,{onKeyDown:n.handleKeyPress},a.a.createElement(K,null,a.a.createElement("div",null,"welcome")),a.a.createElement("div",null,a.a.createElement("h5",null,n.props.statusText)),a.a.createElement(U,null,a.a.createElement("input",{name:"username",type:"text",className:"form-control text-input",value:n.state.username,placeholder:"name",onChange:function(e){return n.setState({username:e.target.value})}})),a.a.createElement(U,null,a.a.createElement("input",{name:"password",type:"password",className:"form-control text-input",value:n.state.password,placeholder:"password",onChange:function(e){return n.setState({password:e.target.value})}})),a.a.createElement(U,null,a.a.createElement(F,{type:"submit",value:"login",className:"btn btn-default",onClick:n.login}),a.a.createElement(G,{type:"submit",value:"register",className:"btn btn-default",onClick:function(){}})))},n}return Object(N.a)(t,e),t}(a.a.Component),P=Object(f.b)(function(e){return{statusText:e.auth.statusText}},function(e){return{login:function(t,n){return e(y(t,n))}}})(Y);function M(){var e=Object(w.a)(["\n  padding-top: 20px;\n  padding-bottom: 20px;\n"]);return M=function(){return e},e}var z=C.a.div(M());function J(){var e=Object(w.a)(["\n  font-weight: bold;\n  text-align: right;\n"]);return J=function(){return e},e}function B(){var e=Object(w.a)(["\n  font-weight: bold;\n"]);return B=function(){return e},e}var q=C.a.div(B()),H=C.a.div(J()),Q=function(e,t,n){return"date"===e||"course"===e?a.a.createElement(q,{className:"col-xs-3",onClick:function(){return n(t)}},e):a.a.createElement(H,{className:"col-xs-1",onClick:function(){return n(t)}},e)},V=function(e){var t=e.onClick;return a.a.createElement("div",{className:"row",style:{cursor:"pointer"}},Q("date","date",t),Q("course","course",t),Q("score","total_strokes",t),Q("front","front_9_strokes",t),Q("back","back_9_strokes",t),Q("putts","total_putts",t),Q("girs","total_gir",t),Q("hdcp","handicap_index",t))},W=n(14),X=n.n(W),Z=n(38),$=n.n(Z);function ee(){var e=Object(w.a)(["\n  text-align: right;\n  max-width: 28px;\n"]);return ee=function(){return e},e}function te(){var e=Object(w.a)(["\n  text-align: right;\n"]);return te=function(){return e},e}function ne(){var e=Object(w.a)(["\n  text-align: left;\n"]);return ne=function(){return e},e}function re(){var e=Object(w.a)(["\n  text-align: left;\n"]);return re=function(){return e},e}var ae=C.a.th(re()),oe=C.a.td(ne()),ue=C.a.th(te()),ce=C.a.td(ee()),se=function(e){return Array.from({length:9},function(t,n){return e(t,n)})},le=function(e){var t=e.roundData,n=function(e,n){return se(function(r,a){return t.holes[a+e][n]}).reduce(function(e,t){return e+t})};t.front_9_par=n(1,"par"),t.back_9_par=n(10,"par"),t.total_par=t.front_9_par+t.back_9_par;var r=function(e,n){return se(function(r,o){return a.a.createElement(ce,{key:n+"_"+(o+e)},function(e,n){return"gir"===n?t.holes[e].gir?"*":"":t.holes[e][n]}(o+e,n))})},o=function(e,n){return a.a.createElement("tr",null,a.a.createElement(oe,null,e,":"),r(1,n),a.a.createElement(ce,null,t["front_9_"+n]),r(10,n),a.a.createElement(ce,null,t["back_9_"+n]),a.a.createElement(ce,null,t["total_"+n]))};return a.a.createElement("div",{className:"row"},a.a.createElement("div",{className:"col-xs-12"},a.a.createElement("table",{className:"table",style:{width:"100%"}},a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement(ae,null,"hole:"),se(function(e,t){return a.a.createElement(ue,{key:"hole_"+(t+1)},t+1)}),a.a.createElement(ue,null,"front"),se(function(e,t){return a.a.createElement(ue,{key:"hole_"+(t+10)},t+10)}),a.a.createElement(ue,null,"back"),a.a.createElement(ue,null,"total"))),a.a.createElement("tbody",null,o("par","par"),o("score","strokes"),o("putts","putts"),o("gir","gir")))))};function ie(){var e=Object(w.a)(["\n  text-align: right;\n"]);return ie=function(){return e},e}function de(){var e=Object(w.a)(["\n  background-color: #f1f5f1;\n"]);return de=function(){return e},e}var fe=C.a.div(de()),me=C.a.div(ie()),pe=["date","course","total_strokes","front_9_strokes","back_9_strokes","total_putts","total_gir","handicap_index"],Ee=function(e){var t=e.roundData,n=e.onClick;return a.a.createElement("div",{onClick:function(){return n()},style:{cursor:"pointer"}},a.a.createElement("div",{className:"row selected-round-row"},pe.map(function(e){return function(e){return"date"===e?a.a.createElement(fe,{className:"col-xs-3",key:e},a.a.createElement($.a,{format:"YYYY-MM-DD"},t.date)):"course"===e?a.a.createElement(fe,{className:"col-xs-3",key:e},t.course):a.a.createElement(fe,{className:"col-xs-1",key:e},a.a.createElement(me,null,t[e]))}(e)})),a.a.createElement(le,{roundData:t}))};function ve(){var e=Object(w.a)(["\n  text-align: right;\n"]);return ve=function(){return e},e}var he=C.a.div(ve()),be=Object(f.b)(function(e){return{rounds:e.rounds.data,sortKey:e.rounds.sortKey,reverseSort:e.rounds.reverseSort,selectedSeason:e.stats.selectedSeason,selectedRoundIndex:e.rounds.selectedRoundIndex}},function(e){return{selectRound:function(t){return e(function(e){return function(t,n){if(null===e)return t({type:"SELECT_ROUND",roundIndex:e});var r=n().rounds;return r.data[e].roundData?t({type:"SELECT_ROUND",roundIndex:e}):k("/api/round/"+r.data[e].id,n().token).then(function(e){return e.data}).then(function(n){return t({type:"SELECT_ROUND",roundIndex:e,data:n})}).catch(function(){return console.log("failed to get round data")})}}(t))}}})(function(e){return a.a.createElement("div",null,Object.keys(e.rounds).map(function(e){return parseInt(e)}).filter(function(t){return 2046===e.selectedSeason||e.rounds[t].date.split("-")[0]===""+e.selectedSeason}).sort(function(t,n){return"date"===e.sortKey?X()(e.rounds[e.reverseSort?n:t].date).diff(X()(e.rounds[e.reverseSort?t:n].date)):e.rounds[e.reverseSort?n:t][e.sortKey]>e.rounds[e.reverseSort?t:n][e.sortKey]?1:-1}).map(function(t){var n=e.rounds[t];return t===e.selectedRoundIndex?a.a.createElement(Ee,{roundData:n.roundData,onClick:function(){return e.selectRound(null)},key:t}):a.a.createElement("div",{className:"row",onClick:function(){return e.selectRound(t)},style:{cursor:"pointer"},key:t},a.a.createElement("div",{className:"col-xs-3"},n.date.split(" ")[0]),a.a.createElement("div",{className:"col-xs-3"},n.course),a.a.createElement(he,{className:"col-xs-1"},n.total_strokes),a.a.createElement(he,{className:"col-xs-1"},n.front_9_strokes),a.a.createElement(he,{className:"col-xs-1"},n.back_9_strokes),a.a.createElement(he,{className:"col-xs-1"},n.total_putts),a.a.createElement(he,{className:"col-xs-1"},n.total_gir),a.a.createElement(he,{className:"col-xs-1"},n.handicap_index))}))}),ge=Object(f.b)(function(e){return{roundsLoaded:e.rounds.roundsLoaded}},function(e){return{setSortKey:function(t){return e({type:"SET_SORT_KEY",sortKey:t})}}})(function(e){var t=e.roundsLoaded,n=e.setSortKey;return a.a.createElement(z,{className:"row"},t?a.a.createElement("div",{className:"col-xs-12"},a.a.createElement(V,{onClick:n}),a.a.createElement(be,null)):a.a.createElement("p",null,"loading rounds..."))});function Oe(){var e=Object(w.a)(["\n  cursor: pointer;\n  text-align: right;\n"]);return Oe=function(){return e},e}var ke=C.a.th(Oe()),_e=function(e){var t=e.seasons,n=e.onClick;return a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",null,"season:"),t.map(function(e){return a.a.createElement(ke,{key:e,onClick:function(){return n(e)}},2046===e?"overall":e)})))};function ye(){var e=Object(w.a)(["\n  cursor: pointer;\n  text-align: right;\n"]);return ye=function(){return e},e}var xe=C.a.td(ye()),je={strokes:"scoring average",putts:"putts per round",gir:"greens per round",handicap:"handicap",par3:"par 3 average",par4:"par 4 average",par5:"par 5 average"},Se=function(e){var t=e.seasons,n=e.stats,r=e.onClick;return a.a.createElement("tbody",null,Object.keys(je).map(function(e){return a.a.createElement("tr",{key:e},a.a.createElement("td",null,je[e],":"),t.map(function(t){return a.a.createElement(xe,{onClick:function(){return r(t)},key:t+"-"+e},n[t][e])}))}))},Ne=Object(f.b)(function(e){return{statsLoaded:e.stats.statsLoaded,stats:e.stats.data}},function(e){return{selectSeason:function(t){return e(function(e){return{type:"SELECT_SEASON",season:e}}(t))}}})(function(e){var t=e.statsLoaded,n=e.stats,r=e.selectSeason;if(t){var o=Object.keys(n).map(function(e){return parseInt(e)}).sort().reverse();return a.a.createElement(z,{className:"row"},a.a.createElement("div",{className:"col-xs-12"},a.a.createElement("table",{style:{width:"100%"}},a.a.createElement(_e,{seasons:o,onClick:r}),a.a.createElement(Se,{seasons:o,stats:n,onClick:r}))))}return a.a.createElement("p",null,"loading stats...")});function we(){var e=Object(w.a)(["\n  text-align: center;\n"]);return we=function(){return e},e}function Ce(){var e=Object(w.a)(["\n  max-width: 720px;\n  min-width: 480px;\n  margin: auto;\n"]);return Ce=function(){return e},e}var Te=C.a.div(Ce()),De=C.a.div(we()),Ie=function(e){function t(){var e,n;Object(x.a)(this,t);for(var r=arguments.length,o=new Array(r),u=0;u<r;u++)o[u]=arguments[u];return(n=Object(j.a)(this,(e=Object(S.a)(t)).call.apply(e,[this].concat(o)))).componentDidMount=function(){n.props.stats[2046]||(console.log("getting stats"),n.props.addStats()),n.props.rounds[0]||(console.log("getting rounds"),n.props.addRounds())},n.render=function(){return a.a.createElement(Te,{className:"container"},a.a.createElement(De,{className:"row"},a.a.createElement("div",{className:"col-xs-12"},a.a.createElement("h3",null,"all statistics"))),a.a.createElement(Ne,null),a.a.createElement(ge,null))},n}return Object(N.a)(t,e),t}(a.a.Component),Le=Object(f.b)(function(e){return{rounds:e.rounds.data,stats:e.stats.data}},function(e){return{addRounds:function(){return e(function(e,t){return k("/api/user/rounds",t().token).then(function(e){return e.data}).then(function(t){return e({type:"ADD_ROUNDS",data:t})}).catch(function(){return console.log("failed to get rounds")})})},addStats:function(){return e(function(e,t){return k("/api/user/stats",t().token).then(function(e){return e.data}).then(function(t){return e({type:"ADD_STATS",data:t})}).catch(function(){return console.log("failed to get stats")})})}}})(Ie),Re=Object(f.b)(function(e){return{token:e.token,isAuthenticated:e.auth.isAuthenticated,authenticationFailed:e.auth.authenticationFailed}},function(e){return{checkToken:function(){return e(_())}}})(function(e){var t=e.token,n=e.isAuthenticated,r=e.authenticationFailed,o=e.checkToken;return t&&n?a.a.createElement(Le,null):!t||r?a.a.createElement(P,null):(o(),a.a.createElement("div",null,a.a.createElement("p",null,"authenticating...")))});n(70);u.a.render(a.a.createElement(function(e){var t=e.children;return a.a.createElement(f.a,{store:h},a.a.createElement(m.a,{loading:null,persistor:b},t))},null,a.a.createElement(Re,null)),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.c31845d9.chunk.js.map