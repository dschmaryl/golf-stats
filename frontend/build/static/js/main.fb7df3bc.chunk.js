(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{38:function(e,t,n){e.exports=n(68)},67:function(e,t,n){},68:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(8),c=n.n(o),u=n(4),s=n(7),l=n(33),i=n(13),d=n(3),f=Object(s.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{token:null,isAuthenticated:!1,statusText:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_SUCCESS":return{token:t.token,isAuthenticated:!0,statusText:"You are logged in."};case"LOGIN_FAILURE":return{token:null,isAuthenticated:!1,statusText:"Error logging in: ".concat(t.error)};case"LOGOUT":return{token:null,isAuthenticated:!1,statusText:"You are logged out."};default:return e}},rounds:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{roundsLoaded:!1,sortKey:"date",reverseSort:!0,selectedRoundIndex:null,data:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_ROUNDS":return Object(d.a)({},e,{roundsLoaded:!0,data:Object(d.a)({},t.data)});case"ADD_ROUND_DATA":return Object(d.a)({},e,{data:Object(d.a)({},e.data,Object(i.a)({},t.roundIndex,Object(d.a)({},e.data[t.roundIndex],{roundData:Object(d.a)({},t.roundData)})))});case"SELECT_ROUND":return t.data?Object(d.a)({},e,{selectedRoundIndex:t.roundIndex,data:Object(d.a)({},e.data,Object(i.a)({},t.roundIndex,Object(d.a)({},e.data[t.roundIndex],{roundData:Object(d.a)({},t.data)})))}):Object(d.a)({},e,{selectedRoundIndex:t.roundIndex});case"SET_SORT_KEY":return t.sortKey===e.sortKey?Object(d.a)({},e,{reverseSort:!e.reverseSort}):"date"===t.sortKey||"total_gir"===t.sortKey?Object(d.a)({},e,{reverseSort:!0,sortKey:t.sortKey}):Object(d.a)({},e,{reverseSort:!1,sortKey:t.sortKey});case"TOGGLE_SORT_ORDER":return Object(d.a)({},e,{reverseSort:!e.reverseSort});default:return e}},stats:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{statsLoaded:!1,selectedSeason:null,data:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_STATS":return Object(d.a)({},e,{statsLoaded:!0,data:Object(d.a)({},t.data)});case"SELECT_SEASON":return Object(d.a)({},e,{selectedSeason:"2046"===t.season?null:t.season});default:return e}}}),m=Object(s.d)(f,Object(s.a)(l.a)),p=n(9),v=n(11),E=n(10),h=n(12),g=n(17),b=n.n(g),y=function(e,t){return b.a.get(e,function(e){return{headers:{Authorization:e}}}(t))},O=function(e){return localStorage.setItem("token",e),{type:"LOGIN_SUCCESS",token:e}},k=function(e){return localStorage.removeItem("token"),{type:"LOGIN_FAILURE",error:e}},_=function(e){return function(t){(function(e){return b.a.post("/api/is_token_valid",{token:e})})(e).then(function(e){return e.data}).then(function(n){return n?t(O(e)):(t({type:"CLEAR_TOKEN"}),t(k("Invalid token")))}).catch(function(){return t(k("Invalid token"))})}},x=function(e,t){return function(n){(function(e,t){return b.a.post("/api/get_token",{username:e,password:t})})(e,t).then(function(e){return e.data}).then(function(e){try{n(O(e.token))}catch(t){n(k("Invalid token"))}}).catch(function(){n(k("Invalid username or password"))})}},S=n(1),j=n(2);function N(){var e=Object(S.a)(["\n  margin: 20px 0 20px 0;\n"]);return N=function(){return e},e}function w(){var e=Object(S.a)(["\n  font-size: 3em;\n"]);return w=function(){return e},e}function D(){var e=Object(S.a)(["\n  min-width: 320px;\n  max-width: 420px;\n  padding: 10% 0 0 20%;\n"]);return D=function(){return e},e}var C=j.a.div(D()),A=j.a.div(w()),I=j.a.div(N()),R=function(e){function t(){var e,n;Object(p.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(n=Object(v.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(o)))).state={username:"",password:""},n.handleKeyPress=function(e){return"Enter"===e.key?n.login(e):null},n.login=function(e){e.preventDefault(),n.props.login(n.state.username,n.state.password)},n.render=function(){return a.a.createElement(C,{onKeyPress:n.handleKeyPress},a.a.createElement(A,null,a.a.createElement("div",null,"welcome")),a.a.createElement("form",null,a.a.createElement(I,null,a.a.createElement("input",{name:"username",type:"text",className:"form-control text-input",value:n.state.username,placeholder:"name",onChange:function(e){return n.setState({username:e.target.value})}})),a.a.createElement(I,null,a.a.createElement("input",{name:"password",type:"password",className:"form-control text-input",value:n.state.password,placeholder:"password",onChange:function(e){return n.setState({password:e.target.value})}})),a.a.createElement(I,null,a.a.createElement("input",{type:"submit",value:"login",className:"btn btn-default",onClick:function(e){return n.login(e)}}))))},n}return Object(h.a)(t,e),t}(a.a.Component),L=Object(u.b)(null,function(e){return{login:function(t,n){return e(x(t,n))}}})(R);function T(){var e=Object(S.a)(["\n  padding-top: 20px;\n  padding-bottom: 20px;\n"]);return T=function(){return e},e}var K=j.a.div(T());function U(){var e=Object(S.a)(["\n  font-weight: bold;\n  text-align: right;\n"]);return U=function(){return e},e}function Y(){var e=Object(S.a)(["\n  font-weight: bold;\n"]);return Y=function(){return e},e}var G=j.a.div(Y()),M=j.a.div(U()),P=function(e,t,n,r){return"date"===e||"course"===e?a.a.createElement(G,{className:"col-xs-3",onClick:function(){return r(t,n)}},e):a.a.createElement(M,{className:"col-xs-1",onClick:function(){return r(t,n)}},e)},z=function(e){var t=e.onClick;return a.a.createElement("div",{className:"row",style:{cursor:"pointer"}},P("date","date",!1,t),P("course","course",!1,t),P("score","total_strokes",!0,t),P("front","front_9_strokes",!0,t),P("back","back_9_strokes",!0,t),P("putts","total_putts",!0,t),P("girs","total_gir",!1,t),P("hdcp","handicap_index",!0,t))},F=n(16),J=n.n(F),B=n(36),W=n.n(B),q={textAlign:"left"},H={textAlign:"right"},Q={textAlign:"Right",maxWidth:"28px"},V=function(e){return Array.from({length:9},e)},X=function(e){var t=e.roundData,n=function(e,n){return V(function(r,a){return t.holes[a+e][n]}).reduce(function(e,t){return e+t})};t.front_9_par=n(1,"par"),t.back_9_par=n(10,"par"),t.total_par=t.front_9_par+t.back_9_par;var r=function(e,n){return V(function(r,o){return a.a.createElement("td",{style:Q,key:n+"_"+(o+e)},function(e,n){return"gir"===n?t.holes[e].gir?"*":"":t.holes[e][n]}(o+e,n))})},o=function(e,n){return a.a.createElement("tr",null,a.a.createElement("td",{style:q},e,":"),r(1,n),a.a.createElement("td",{style:H},t["front_9_"+n]),r(10,n),a.a.createElement("td",{style:H},t["back_9_"+n]),a.a.createElement("td",{style:H},t["total_"+n]))};return a.a.createElement("div",{className:"row"},a.a.createElement("div",{className:"col-xs-12"},a.a.createElement("table",{className:"table",style:{width:"100%"}},a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",{style:q},"hole:"),V(function(e,t){return a.a.createElement("th",{style:Q,key:"hole_"+(t+1)},t+1)}),a.a.createElement("th",{style:H},"front"),V(function(e,t){return a.a.createElement("th",{style:Q,key:"hole_"+(t+10)},t+10)}),a.a.createElement("th",{style:H},"back"),a.a.createElement("th",{style:H},"total"))),a.a.createElement("tbody",null,o("par","par"),o("score","strokes"),o("putts","putts"),o("gir","gir")))))};function Z(){var e=Object(S.a)(["\n  text-align: right;\n"]);return Z=function(){return e},e}function $(){var e=Object(S.a)(["\n  background-color: #f1f5f1;\n"]);return $=function(){return e},e}var ee=j.a.div($()),te=j.a.div(Z()),ne=["date","course","total_strokes","front_9_strokes","back_9_strokes","total_putts","total_gir","handicap_index"],re=function(e){var t=e.roundData,n=e.onClick;return a.a.createElement("div",{onClick:n,style:{cursor:"pointer"}},a.a.createElement("div",{className:"row selected-round-row"},ne.map(function(e){return function(e){return"date"===e?a.a.createElement(ee,{className:"col-xs-3",key:e},a.a.createElement(W.a,{format:"YYYY-MM-DD"},t.date)):"course"===e?a.a.createElement(ee,{className:"col-xs-3",key:e},t.course):a.a.createElement(ee,{className:"col-xs-1",key:e},a.a.createElement(te,null,t[e]))}(e)})),a.a.createElement(X,{roundData:t}))};function ae(){var e=Object(S.a)(["\n  text-align: right;\n"]);return ae=function(){return e},e}var oe=j.a.div(ae()),ce=Object(u.b)(function(e){return{rounds:e.rounds.data,sortKey:e.rounds.sortKey,reverseSort:e.rounds.reverseSort,selectedSeason:e.stats.selectedSeason,selectedRoundIndex:e.rounds.selectedRoundIndex}},function(e){return{selectRound:function(t){return e(function(e){return function(t,n){if(null===e)t({type:"SELECT_ROUND",roundIndex:e});else{var r=n().rounds;r.data[e].roundData?t({type:"SELECT_ROUND",roundIndex:e}):y("/api/round/"+r.data[e].id,n().auth.token).then(function(e){return e.data}).then(function(n){return t({type:"SELECT_ROUND",roundIndex:e,data:n})}).catch(function(){return console.log("failed to get round data")})}}}(t))}}})(function(e){return Object.keys(e.rounds).filter(function(t){return!e.selectedSeason||e.rounds[t].date.split("-")[0]===e.selectedSeason}).sort(function(t,n){return"date"===e.sortKey?J()(e.rounds[e.reverseSort?n:t].date).diff(J()(e.rounds[e.reverseSort?t:n].date)):"course"===e.sortKey?e.rounds[e.reverseSort?n:t].course>e.rounds[e.reverseSort?t:n].course?1:-1:e.rounds[e.reverseSort?n:t][e.sortKey]-e.rounds[e.reverseSort?t:n][e.sortKey]}).map(function(t){var n=e.rounds[t];return t===e.selectedRoundIndex?a.a.createElement(re,{roundData:n.roundData,onClick:function(){return e.selectRound(null)},key:t}):a.a.createElement("div",{className:"row",onClick:function(){return e.selectRound(t)},style:{cursor:"pointer"},key:t},a.a.createElement("div",{className:"col-xs-3"},n.date.split(" ")[0]),a.a.createElement("div",{className:"col-xs-3"},n.course),a.a.createElement(oe,{className:"col-xs-1"},n.total_strokes),a.a.createElement(oe,{className:"col-xs-1"},n.front_9_strokes),a.a.createElement(oe,{className:"col-xs-1"},n.back_9_strokes),a.a.createElement(oe,{className:"col-xs-1"},n.total_putts),a.a.createElement(oe,{className:"col-xs-1"},n.total_gir),a.a.createElement(oe,{className:"col-xs-1"},n.handicap_index))})}),ue=Object(u.b)(function(e){return{roundsLoaded:e.rounds.roundsLoaded}},function(e){return{setSortKey:function(t){return e({type:"SET_SORT_KEY",sortKey:t})}}})(function(e){var t=e.roundsLoaded,n=e.setSortKey;return t?a.a.createElement(K,{className:"row"},a.a.createElement("div",{className:"col-xs-12"},a.a.createElement(z,{onClick:function(e){return n(e)}}),a.a.createElement(ce,null))):a.a.createElement("p",null,"loading rounds")});function se(){var e=Object(S.a)(["\n  cursor: pointer;\n  text-align: right;\n"]);return se=function(){return e},e}var le=j.a.th(se()),ie=function(e){var t=e.seasons,n=e.onClick;return a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",null,"season:"),t.map(function(e){return a.a.createElement(le,{onClick:function(){return n(e)},key:e},"2046"===e?"overall":e)})))};function de(){var e=Object(S.a)(["\n  cursor: pointer;\n  text-align: right;\n"]);return de=function(){return e},e}var fe=j.a.td(de()),me={strokes:"scoring average",putts:"putts per round",gir:"greens per round",handicap:"handicap",par3:"par 3 average",par4:"par 4 average",par5:"par 5 average"},pe=function(e){var t=e.seasons,n=e.stats,r=e.onClick;return a.a.createElement("tbody",null,Object.keys(me).map(function(e){return a.a.createElement("tr",{key:e},a.a.createElement("td",null,me[e],":"),t.map(function(t){return a.a.createElement(fe,{onClick:function(){return r(t)},key:t+"-"+e},n[t][e])}))}))},ve=Object(u.b)(function(e){return{statsLoaded:e.stats.statsLoaded,stats:e.stats.data}},function(e){return{selectSeason:function(t){return e(function(e){return{type:"SELECT_SEASON",season:e}}(t))}}})(function(e){var t=e.statsLoaded,n=e.stats,r=e.selectSeason;if(t){var o=Object.keys(n).sort().reverse();return a.a.createElement(K,{className:"row"},a.a.createElement("div",{className:"col-xs-12"},a.a.createElement("table",{style:{width:"100%"}},a.a.createElement(ie,{seasons:o,onClick:function(e){return r(e)}}),a.a.createElement(pe,{seasons:o,stats:n,onClick:function(e){return r(e)}}))))}return a.a.createElement("p",null,"loading stats")});function Ee(){var e=Object(S.a)(["\n  text-align: center;\n"]);return Ee=function(){return e},e}function he(){var e=Object(S.a)(["\n  max-width: 720px;\n  min-width: 340px;\n  margin: auto;\n"]);return he=function(){return e},e}var ge=j.a.div(he()),be=j.a.div(Ee()),ye=function(e){function t(){var e,n;Object(p.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(n=Object(v.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(o)))).componentDidMount=function(){void 0===n.props.stats.length&&(console.log("getting stats"),n.props.addStats()),void 0===n.props.rounds.length&&(console.log("getting rounds"),n.props.addRounds())},n.render=function(){return a.a.createElement(ge,{className:"container"},a.a.createElement(be,{className:"row"},a.a.createElement("div",{className:"col-xs-12"},a.a.createElement("h3",null,"all statistics"))),a.a.createElement(ve,null),a.a.createElement(ue,null))},n}return Object(h.a)(t,e),t}(a.a.Component),Oe=Object(u.b)(function(e){return{rounds:e.rounds.data,stats:e.stats.data}},function(e){return{addRounds:function(){return e(function(e,t){y("/api/user/rounds",t().auth.token).then(function(e){return e.data}).then(function(t){return e({type:"ADD_ROUNDS",data:t})}).catch(function(){return console.log("failed to get rounds")})})},addStats:function(){return e(function(e,t){y("/api/user/stats",t().auth.token).then(function(e){return e.data}).then(function(t){return e({type:"ADD_STATS",data:t})}).catch(function(){return console.log("failed to get stats")})})}}})(ye),ke=function(e){function t(){var e,n;Object(p.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(n=Object(v.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(o)))).componentDidMount=function(){if(!n.props.isAuthenticated){var e=localStorage.getItem("token");e&&n.props.checkToken(e)}},n.render=function(){return n.props.isAuthenticated?a.a.createElement(Oe,null):a.a.createElement(L,null)},n}return Object(h.a)(t,e),t}(a.a.Component),_e=Object(u.b)(function(e){return{isAuthenticated:e.auth.isAuthenticated}},function(e){return{checkToken:function(t){return e(_(t))}}})(ke);n(67);c.a.render(a.a.createElement(u.a,{store:m},a.a.createElement(_e,null)),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.fb7df3bc.chunk.js.map