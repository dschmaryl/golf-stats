(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{122:function(e,t,n){e.exports=n(297)},296:function(e,t,n){},297:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(18),u=n.n(o),s=n(20),l=n(112),i=n(70),c=n(114),d=n.n(c),p=n(16),g=n(115),m=n(47),f=n(17),h=Object(s.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isAuthenticated:!1,authenticationFailed:!1,statusText:"Please log in",username:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_SUCCESS":return{isAuthenticated:!0,authenticationFailed:!1,statusText:"You are logged in",username:t.username};case"LOGIN_FAILURE":return{isAuthenticated:!1,authenticationFailed:!0,statusText:"Error logging in: ".concat(t.error)};case"LOGOUT":return{isAuthenticated:!1,authenticationFailed:!1,statusText:"Please log in"};default:return e}},rounds:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{roundsLoaded:!1,sortKey:"date",reverseSort:!0,selectedRoundIndex:0,selectedRoundIsLoaded:!1,showRoundDialog:!1,data:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_ROUNDS":return Object(f.a)({},e,{roundsLoaded:!0,data:Object(f.a)({},t.data)});case"ADD_ROUND_DATA":return Object(f.a)({},e,{selectedRoundIsLoaded:!0,data:Object(f.a)({},e.data,Object(m.a)({},t.roundIndex,Object(f.a)({},e.data[t.roundIndex],{roundData:Object(f.a)({},t.data)})))});case"SET_SELECTED_ROUND_IS_LOADED":return Object(f.a)({},e,{selectedRoundIsLoaded:!0});case"SHOW_ROUND_DIALOG":return Object(f.a)({},e,{showRoundDialog:!0,selectedRoundIndex:t.roundIndex,selectedRoundIsLoaded:!1});case"HIDE_ROUND_DIALOG":return Object(f.a)({},e,{showRoundDialog:!1});case"SET_SORT_KEY":return t.sortKey===e.sortKey?Object(f.a)({},e,{reverseSort:!e.reverseSort}):"date"===t.sortKey||"total_gir"===t.sortKey?Object(f.a)({},e,{reverseSort:!0,sortKey:t.sortKey}):Object(f.a)({},e,{reverseSort:!1,sortKey:t.sortKey});case"TOGGLE_SORT_ORDER":return Object(f.a)({},e,{reverseSort:!e.reverseSort});default:return e}},stats:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{statsLoaded:!1,selectedSeason:2046,data:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_STATS":return Object(f.a)({},e,{statsLoaded:!0,data:Object(f.a)({},t.data)});case"SELECT_SEASON":return Object(f.a)({},e,{selectedSeason:t.season});default:return e}},token:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TOKEN":return t.token;case"CLEAR_TOKEN":return"";default:return e}}}),E=Object(s.d)(Object(i.a)({key:"golf-stats",storage:d.a,whitelist:["token"]},h),Object(s.a)(l.a)),y=Object(i.b)(E),_=n(116),O=n.n(_),v=n(52),S=n.n(v),b=function(e,t){return S.a.get(e,function(e){return{headers:{Authorization:e}}}(t))},k=function(){return function(e,t){return(n=t().token,S.a.post("/api/is_token_valid",{token:n})).then(function(e){return e.data}).then(function(n){if(n){var a=O()(t().token).username;return e({type:"LOGIN_SUCCESS",username:a})}return e({type:"CLEAR_TOKEN"}),e({type:"LOGIN_FAILURE",error:"Invalid token"})}).catch(function(){return e({type:"LOGIN_FAILURE",error:"Invalid token"})});var n}},D=function(e,t){return function(n){return function(e,t){return S.a.post("/api/get_token",{username:e,password:t})}(e,t).then(function(e){return e.data}).then(function(t){return n({type:"SET_TOKEN",token:t.token}),n({type:"LOGIN_SUCCESS",username:e})}).catch(function(){return n({type:"LOGIN_FAILURE",error:"Invalid username or password"})})}},x=n(48),w=n(50),C=n(49),R=n(51),L=n(31),I=n.n(L),T=n(68),j=n.n(T),A={loginContainer:{width:"200px",margin:"auto",paddingTop:"10%",paddingRight:"10%"},rowContainer:{marginBottom:"20px"}},K=function(e){function t(){var e,n;Object(x.a)(this,t);for(var a=arguments.length,o=new Array(a),u=0;u<a;u++)o[u]=arguments[u];return(n=Object(w.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(o)))).state={username:"",password:""},n.handleKeyPress=function(e){13===e.keyCode&&n.login()},n.login=function(){n.props.login(n.state.username,n.state.password)},n.render=function(){return r.a.createElement("div",{style:A.loginContainer,onKeyDown:n.handleKeyPress},r.a.createElement("h2",null,"welcome"),r.a.createElement("h5",null,n.props.statusText),r.a.createElement("div",{style:A.rowContainer},r.a.createElement(j.a,{label:"username",value:n.state.username,placeholder:"name",onChange:function(e){return n.setState({username:e.target.value})}})),r.a.createElement("div",{style:A.rowContainer},r.a.createElement(j.a,{label:"password",type:"password",autoComplete:"current-password",value:n.state.password,placeholder:"password",onChange:function(e){return n.setState({password:e.target.value})}})),r.a.createElement("div",{style:A.rowContainer},r.a.createElement(I.a,{variant:"outlined",style:{marginTop:"10px"},onClick:n.login},"login"),r.a.createElement(I.a,{variant:"outlined",style:{marginLeft:"10px",marginTop:"10px"},onClick:function(){}},"register")))},n}return Object(R.a)(t,e),t}(r.a.Component),N=Object(p.b)(function(e){return{statusText:e.auth.statusText}},function(e){return{login:function(t,n){return e(D(t,n))}}})(K),U=n(34),G=n.n(U),F=n(9),W=n.n(F),H=n(32),P=n.n(H),B=n(21),Y=n.n(B),J=n(117),z=n.n(J),M={wideCell:{minWidth:"70px",maxWidth:"70px",padding:"8px"},narrowCell:{padding:"8px"}},q=Object(p.b)(function(e){return{sortKey:e.rounds.sortKey,reverseSort:e.rounds.reverseSort}},function(e){return{setSortKey:function(t){return e({type:"SET_SORT_KEY",sortKey:t})}}})(function(e){var t=e.sortKey,n=e.reverseSort,a=e.setSortKey,o=function(e,o){return r.a.createElement(W.a,{align:"date"===e||"course"===e?"left":"right",style:"date"===e||"course"===e?M.wideCell:M.narrowCell},r.a.createElement(z.a,{active:t===o,direction:n?"desc":"asc",onClick:function(){return a(o)}},e))};return r.a.createElement(P.a,null,r.a.createElement(Y.a,null,o("date","date"),o("course","course"),o("score","total_strokes"),o("front","front_9_strokes"),o("back","back_9_strokes"),o("putts","total_putts"),o("girs","total_gir"),o("hdcp","handicap_index")))}),Q=n(69),V=n.n(Q),X=n(33),Z=n.n(X),$=Object(p.b)(function(e){return{rounds:e.rounds.data,sortKey:e.rounds.sortKey,reverseSort:e.rounds.reverseSort,selectedSeason:e.stats.selectedSeason}},function(e){return{showRoundDialog:function(t){return e(function(e){return function(t,n){t({type:"SHOW_ROUND_DIALOG",roundIndex:e});var a=n().rounds.data;return a[e].roundData?t({type:"SET_SELECTED_ROUND_IS_LOADED"}):b("/api/round/"+a[e].id,n().token).then(function(e){return e.data}).then(function(n){return t({type:"ADD_ROUND_DATA",roundIndex:e,data:n})}).catch(function(){return console.log("failed to get round data")})}}(t))}}})(function(e){return r.a.createElement(Z.a,null,Object.keys(e.rounds).map(function(e){return parseInt(e)}).filter(function(t){return 2046===e.selectedSeason||e.rounds[t].date.split("-")[0]===""+e.selectedSeason}).sort(function(t,n){return"date"===e.sortKey?V()(e.rounds[e.reverseSort?n:t].date).diff(V()(e.rounds[e.reverseSort?t:n].date)):e.rounds[e.reverseSort?n:t][e.sortKey]>e.rounds[e.reverseSort?t:n][e.sortKey]?1:-1}).map(function(t){var n=e.rounds[t];return r.a.createElement(Y.a,{key:t,onClick:function(){return e.showRoundDialog(t)},style:{cursor:"pointer"},hover:!0},r.a.createElement(W.a,{style:M.wideCell},n.date.split(" ")[0]),r.a.createElement(W.a,{style:M.wideCell},n.course),r.a.createElement(W.a,{style:M.narrowCell,align:"right"},n.total_strokes),r.a.createElement(W.a,{style:M.narrowCell,align:"right"},n.front_9_strokes),r.a.createElement(W.a,{style:M.narrowCell,align:"right"},n.back_9_strokes),r.a.createElement(W.a,{style:M.narrowCell,align:"right"},n.total_putts),r.a.createElement(W.a,{style:M.narrowCell,align:"right"},n.total_gir),r.a.createElement(W.a,{style:M.narrowCell,align:"right"},n.handicap_index))}))}),ee=n(118),te=n.n(ee),ne=n(121),ae=n.n(ne),re=n(120),oe=n.n(re),ue=n(119),se=n.n(ue),le=function(e){return Array.from({length:9},function(t,n){return e(t,n)})},ie=Object(p.b)(function(e){return{selectedRoundIsLoaded:e.rounds.selectedRoundIsLoaded,round:e.rounds.data[e.rounds.selectedRoundIndex]}},function(e){return{hideRoundDialog:function(){return e({type:"HIDE_ROUND_DIALOG"})}}})(function(e){var t=e.selectedRoundIsLoaded,n=e.round;if(t){console.log(n);var a=n.roundData,o=function(e,t){return le(function(n,r){return a.holes[r+e][t]}).reduce(function(e,t){return e+t})};a.front_9_par=o(1,"par"),a.back_9_par=o(10,"par"),a.total_par=a.front_9_par+a.back_9_par;var u=function(e,t){return le(function(n,o){return r.a.createElement(W.a,{align:"right",style:{padding:"6px"},key:t+"_"+(o+e)},function(e,t){return"gir"===t?a.holes[e].gir?"*":"":a.holes[e][t]}(o+e,t))})},s=function(e,t){return r.a.createElement(Y.a,null,r.a.createElement(W.a,{style:{padding:"8px"}},e,":"),u(1,t),r.a.createElement(W.a,{align:"right",style:{padding:"8px"}},a["front_9_"+t]),u(10,t),r.a.createElement(W.a,{align:"right",style:{padding:"8px"}},a["back_9_"+t]),r.a.createElement(W.a,{align:"right",style:{padding:"8px"}},a["total_"+t]))};return r.a.createElement(G.a,{padding:"dense"},r.a.createElement(P.a,null,r.a.createElement(Y.a,null,r.a.createElement(W.a,{style:{padding:"8px"}},"hole:"),le(function(e,t){return r.a.createElement(W.a,{align:"right",style:{padding:"6px"},key:"hole_"+(t+1)},t+1)}),r.a.createElement(W.a,{align:"right",style:{padding:"8px"}},"front"),le(function(e,t){return r.a.createElement(W.a,{align:"right",style:{padding:"6px"},key:"hole_"+(t+10)},t+10)}),r.a.createElement(W.a,{align:"right",style:{padding:"8px"}},"back"),r.a.createElement(W.a,{align:"right",style:{padding:"8px"}},"total"))),r.a.createElement(Z.a,null,s("par","par"),s("score","strokes"),s("putts","putts"),s("gir","gir")))}return r.a.createElement("div",{style:{padding:"20px"}},r.a.createElement("h5",null,"loading round data..."))}),ce=Object(p.b)(function(e){return{showRoundDialog:e.rounds.showRoundDialog,round:e.rounds.data[e.rounds.selectedRoundIndex]}},function(e){return{hideRoundDialog:function(){return e({type:"HIDE_ROUND_DIALOG"})}}})(function(e){var t=e.showRoundDialog,n=e.round,a=e.hideRoundDialog;return r.a.createElement(te.a,{open:t,onClose:function(e){return a()},maxWidth:"md",fullWidth:!0},r.a.createElement(se.a,null,n?n.date.split(" ")[0]+(n.roundData?" - "+n.roundData.course_name:""):""),r.a.createElement(oe.a,null,r.a.createElement(ie,null)),r.a.createElement(ae.a,null,r.a.createElement(I.a,{variant:"outlined",style:{marginTop:"10px"},onClick:function(e){return a()}},"close")))}),de=Object(p.b)(function(e){return{roundsLoaded:e.rounds.roundsLoaded}})(function(e){var t=e.roundsLoaded;return r.a.createElement("div",{style:{marginTop:"40px",marginBottom:"50px"}},r.a.createElement("h2",null,"rounds"),t?r.a.createElement(G.a,{padding:"dense",style:{marginTop:"-10px"}},r.a.createElement(q,null),r.a.createElement($,null)):r.a.createElement("div",{style:{padding:"10px"}},r.a.createElement("h5",null,"loading rounds...")),r.a.createElement(ce,null))}),pe=function(e){var t=e.seasons,n=e.onClick;return r.a.createElement(P.a,null,r.a.createElement(Y.a,null,r.a.createElement(W.a,null,"season:"),t.map(function(e){return r.a.createElement(W.a,{align:"right",key:e,onClick:function(){return n(e)},style:{cursor:"pointer"}},2046===e?"overall":e)})))},ge={strokes:"scoring average",putts:"putts per round",gir:"greens per round",handicap:"handicap",par3:"par 3 average",par4:"par 4 average",par5:"par 5 average"},me=function(e){var t=e.seasons,n=e.stats,a=e.onClick;return r.a.createElement(Z.a,null,Object.keys(ge).map(function(e){return r.a.createElement(Y.a,{key:e},r.a.createElement(W.a,null,ge[e],":"),t.map(function(t){return r.a.createElement(W.a,{align:"right",key:t+"-"+e,onClick:function(){return a(t)},style:{cursor:"pointer"}},n[t][e])}))}))},fe=Object(p.b)(function(e){return{statsLoaded:e.stats.statsLoaded,stats:e.stats.data}},function(e){return{selectSeason:function(t){return e(function(e){return{type:"SELECT_SEASON",season:e}}(t))}}})(function(e){var t=e.statsLoaded,n=e.stats,a=e.selectSeason,o=Object.keys(n).map(function(e){return parseInt(e)}).sort().reverse();return r.a.createElement("div",{style:{marginTop:"20px"}},r.a.createElement("h2",null,"statistics"),t?r.a.createElement(G.a,{style:{marginTop:"-10px"}},r.a.createElement(pe,{seasons:o,onClick:a}),r.a.createElement(me,{seasons:o,stats:n,onClick:a})):r.a.createElement("div",{style:{padding:"10px"}},r.a.createElement("h5",null,"loading stats...")))}),he={mainContainer:{maxWidth:"720px",minWidth:"480px",margin:"auto"},headerRow:{marginTop:"20px"}},Ee=function(e){function t(){var e,n;Object(x.a)(this,t);for(var a=arguments.length,o=new Array(a),u=0;u<a;u++)o[u]=arguments[u];return(n=Object(w.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(o)))).componentDidMount=function(){n.props.stats[2046]||(console.log("getting stats"),n.props.addStats()),n.props.rounds[0]||(console.log("getting rounds"),n.props.addRounds())},n.render=function(){return r.a.createElement("div",{style:he.mainContainer},r.a.createElement("div",{style:he.headerRow},r.a.createElement("h1",null,"hello ",n.props.username)),r.a.createElement(fe,null),r.a.createElement(de,null))},n}return Object(R.a)(t,e),t}(r.a.Component),ye=Object(p.b)(function(e){return{username:e.auth.username,rounds:e.rounds.data,stats:e.stats.data}},function(e){return{addRounds:function(){return e(function(e,t){return b("/api/user/rounds",t().token).then(function(e){return e.data}).then(function(t){return e({type:"ADD_ROUNDS",data:t})}).catch(function(){return console.log("failed to get rounds")})})},addStats:function(){return e(function(e,t){return b("/api/user/stats",t().token).then(function(e){return e.data}).then(function(t){return e({type:"ADD_STATS",data:t})}).catch(function(){return console.log("failed to get stats")})})}}})(Ee),_e=Object(p.b)(function(e){return{token:e.token,isAuthenticated:e.auth.isAuthenticated,authenticationFailed:e.auth.authenticationFailed}},function(e){return{checkToken:function(){return e(k())}}})(function(e){var t=e.token,n=e.isAuthenticated,a=e.authenticationFailed,o=e.checkToken;return t&&n?r.a.createElement(ye,null):!t||a?r.a.createElement(N,null):(o(),r.a.createElement("div",null,r.a.createElement("p",null,"authenticating...")))});n(296);u.a.render(r.a.createElement(function(e){var t=e.children;return r.a.createElement(p.a,{store:E},r.a.createElement(g.a,{loading:null,persistor:y},t))},null,r.a.createElement(_e,null)),document.getElementById("root"))}},[[122,1,2]]]);
//# sourceMappingURL=main.183d5c04.chunk.js.map